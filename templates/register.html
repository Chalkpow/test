<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>회원가입</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center">

  <form action="{{ url_for('register') }}" method="post" class="bg-white p-6 rounded-2xl shadow-lg w-full max-w-md">
    <h2 class="text-2xl font-bold text-center text-gray-800 mb-6">회원가입</h2>

    <!-- 학년, 반, 번호 한 행 -->
    <div class="flex gap-3 mb-4">
      <div class="flex-1">
        <label for="grade" class="block text-sm font-medium text-gray-700 mb-1">학년</label>
        <select id="grade" name="grade" required
          class="w-full rounded-lg border border-gray-300 px-3 py-2 text-base">
          <option value="" disabled selected>학년 선택</option>
          <option value="1">1학년</option>
          <option value="2">2학년</option>
          <option value="3">3학년</option>
        </select>
      </div>

      <div class="flex-1">
        <label for="class" class="block text-sm font-medium text-gray-700 mb-1">반</label>
        <select id="class" name="class" required
          class="w-full rounded-lg border border-gray-300 px-3 py-2 text-base">
          <option value="" disabled selected>반 선택</option>
          <!-- 1~6반 -->
          <script>
            for(let i=1; i<=6; i++){
              document.write(`<option value="${i}">${i}반</option>`);
            }
          </script>
        </select>
      </div>

      <div class="flex-1">
        <label for="number" class="block text-sm font-medium text-gray-700 mb-1">번호</label>
        <select id="number" name="number" required
          class="w-full rounded-lg border border-gray-300 px-3 py-2 text-base">
          <option value="" disabled selected>번호 선택</option>
          <!-- 1~30 번호 -->
          <script>
            for(let i=1; i<=30; i++){
              document.write(`<option value="${i}">${i}번</option>`);
            }
          </script>
        </select>
      </div>
    </div>

    <!-- 이름 -->
    <label for="name" class="block text-sm font-medium text-gray-700 mb-1">이름</label>
    <input type="text" id="name" name="name" required
      class="w-full mb-4 rounded-lg border border-gray-300 px-4 py-2 text-base" />

    <!-- 전화번호 -->
    <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">전화번호</label>
    <input type="tel" id="phone" name="phone" pattern="[0-9]{9,11}" placeholder="숫자만 입력해주세요 (예: 01012345678)"
      class="w-full mb-4 rounded-lg border border-gray-300 px-4 py-2 text-base" />

    <!-- 아이디 -->
    <label for="userid" class="block text-sm font-medium text-gray-700 mb-1">아이디</label>
    <input type="text" id="userid" name="userid" required
      class="w-full mb-4 rounded-lg border border-gray-300 px-4 py-2 text-base" />

    <!-- 비밀번호 -->
    <label for="password" class="block text-sm font-medium text-gray-700 mb-1">비밀번호</label>
    <input type="password" id="password" name="password" required
      class="w-full mb-4 rounded-lg border border-gray-300 px-4 py-2 text-base" />

    <!-- 비밀번호 확인 글자 및 메시지 -->
    <div class="flex items-center mb-1">
      <label for="password_confirm" class="block text-sm font-medium text-gray-700">비밀번호 확인</label>
      <span id="password_match_msg" class="ml-3 text-sm font-semibold"></span>
    </div>
    <!-- 비밀번호 확인 입력란 -->
    <input type="password" id="password_confirm" name="password_confirm" required
      class="w-full mb-6 rounded-lg border border-gray-300 px-4 py-2 text-base" />

    <input type="submit" value="회원가입"
      class="w-full bg-blue-600 text-white text-lg py-3 rounded-2xl font-bold hover:bg-blue-500 transition cursor-pointer" />
  </form>

  <script>
    const passwordInput = document.getElementById('password');
    const passwordConfirmInput = document.getElementById('password_confirm');
    const msgSpan = document.getElementById('password_match_msg');

    function checkPasswordMatch() {
      const pwd = passwordInput.value;
      const confirm = passwordConfirmInput.value;

      if (confirm === "") {
        msgSpan.textContent = "";
        msgSpan.classList.remove('text-green-600', 'text-red-600');
        return;
      }

      if (pwd === confirm) {
        msgSpan.textContent = "일치합니다";
        msgSpan.classList.remove('text-red-600');
        msgSpan.classList.add('text-green-600');
      } else {
        msgSpan.textContent = "일치하지 않습니다";
        msgSpan.classList.remove('text-green-600');
        msgSpan.classList.add('text-red-600');
      }
    }

    passwordInput.addEventListener('input', checkPasswordMatch);
    passwordConfirmInput.addEventListener('input', checkPasswordMatch);
  </script>

</body>
</html>
